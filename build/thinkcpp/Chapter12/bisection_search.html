<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>12.9. Bisection search &#8212; How to Think Like a Computer Scientist - C++</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=DB047029" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presenter_mode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jquery-ui-1.10.3.custom.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/user-highlights.css" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone-custom-sphinx-bootstrap.css?v=5.0.0" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-overrides.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/jquery.highlight.js?v=F1C496C8"></script>
    <script src="../_static/sql-wasm.js?v=44FE0709"></script>
    <script src="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.js"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/pytutor-embed.bundle.js?v=268B5C04"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/Blob.js?v=AEC2447"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.bidi.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.fallbacks.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.messagestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.parser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script src="../_static/runestone.js?v=5.0.0"></script>
    <script src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="../_static/jquery-fix.js"></script>
    <script src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script src="../_static/bootstrap-sphinx.js"></script>
    <script src="../_static/waypoints.min.js"></script>
    <script src="../_static/jquery.idle-timer.js"></script>
    <script src="../_static/processing-1.4.1.min.js"></script>
    <script src="../_static/jquery.hotkey.js"></script>
    <script src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <script src="../_static/presenter_mode.js?v=5.0.0"></script>
    <script src="../_static/theme.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12.10. Decks and subdecks" href="decks_and_subdecks.html" />
    <link rel="prev" title="12.8. Searching" href="searching.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = true;
    eBookConfig.host = 'http://127.0.0.1:8000' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/runestone';
    eBookConfig.course = 'thinkcpp';
    eBookConfig.basecourse = 'thinkcpp';
    eBookConfig.isLoggedIn = false;
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = '' ? '' : 'python'
  eBookConfig.runestone_version = '';
  eBookConfig.jobehost = '';
  eBookConfig.proxyuri_runs = '';
  eBookConfig.proxyuri_files = '';
  eBookConfig.enable_chatcodes = false ? false : false;


</script>


<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar" aria-label="navbar toggle" class="visuallyhidden">toggle navbar</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
          <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          thinkcpp
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>


        <!-- social media dropdown -->
        
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-globe" style="opacity: 0.9"><span aria-label="Social" class="visuallyhidden">Social</span></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li><!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span aria-label="Search" class="visuallyhidden">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"><span aria-label="User" class="visuallyhidden">User</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='/runestone/assignments/chooseAssignment.html'>Assignments</a></li>
            <li><a href='/runestone/assignments/practice'>Practice</a></li>
            <li class="divider"></li>
            
            <li><a href='/runestone/default/courses'>Change Course</a></li>
			      <li class="divider"></li>
            <li id="ip_dropdown_link"><a href='/runestone/admin/index'>Instructor's Page</a></li>
            
            <li><a href='/runestone/dashboard/studentreport'>Progress Page</a></li>
            <li class="divider"></li>
            
            <li><a href="/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="/runestone/default/user/register" id="registerlink">Register</a></li>
            
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
			<!-- dark mode toggle -->
             <li><label class="theme-switch" for="checkbox">
					  <input type="checkbox" id="checkbox" onchange="switchTheme()" />
							<div class="slider round"></div>
					</label>Dark Mode</li>
			 </ul>
        </li>
        <!-- end user account dropdown -->
        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:ACFactory.toggleScratchActivecode()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span aria-label="Scratch Activecode" class="visuallyhidden">Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"><span aria-label="Help" class="visuallyhidden">Help</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='http://runestoneinteractive.org/pages/faq.html'>FAQ</a></li>
            <li><a href='https://runestone.academy/runestone/static/instructorguide/index.html'>Instructors Guide</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=thinkcpp&page=bisection_search'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>
      
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">12.8. </span>Searching" data-toggle="tooltip">
    <a href="searching.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">12.10. </span>Decks and subdecks' data-toggle="tooltip" >              
    <a href="decks_and_subdecks.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

      </div> <!-- navbar -->







    </div> <!-- container -->
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">
  
  <div class="section" id="bisection-search">
<h1><span class="section-number">12.9. </span>Bisection search<a class="headerlink" href="#bisection-search" title="Permalink to this headline">¶</a></h1>
<p>If the cards in the deck are not in order, there is no way to search
that is faster than the linear search. We have to look at every card,
since otherwise there is no way to be certain the card we want is not
there.</p>
<p>But when you look for a word in a dictionary, you don’t search linearly
through every word. The reason is that the words are in alphabetical
order. As a result, you probably use an algorithm that is similar to a
bisection search:</p>
<ol class="arabic simple">
<li><p>Start in the middle somewhere.</p></li>
<li><p>Choose a word on the page and compare it to the word you are looking
for.</p></li>
<li><p>If you found the word you are looking for, stop.</p></li>
<li><p>If the word you are looking for comes after the word on the page,
flip to somewhere later in the dictionary and go to step 2.</p></li>
<li><p>If the word you are looking for comes before the word on the page,
flip to somewhere earlier in the dictionary and go to step 2.</p></li>
</ol>
<p>If you ever get to the point where there are two adjacent words on the
page and your word comes between them, you can conclude that your word
is not in the dictionary. The only alternative is that your word has
been misfiled somewhere, but that contradicts our assumption that the
words are in alphabetical order.</p>
<p>In the case of a deck of cards, if we know that the cards are in order,
we can write a version of <code class="docutils literal notranslate"><span class="pre">find</span></code> that is much faster. The best way to
write a bisection search is with a recursive function. That’s because
bisection is naturally recursive.</p>
<p>The trick is to write a function called <code class="docutils literal notranslate"><span class="pre">findBisect</span></code> that takes two
indices as parameters, <code class="docutils literal notranslate"><span class="pre">low</span></code> and <code class="docutils literal notranslate"><span class="pre">high</span></code>, indicating the segment of
the vector that should be searched (including both <code class="docutils literal notranslate"><span class="pre">low</span></code> and
<code class="docutils literal notranslate"><span class="pre">high</span></code>).</p>
<ol class="arabic simple">
<li><p>To search the vector, choose an index between <code class="docutils literal notranslate"><span class="pre">low</span></code> and <code class="docutils literal notranslate"><span class="pre">high</span></code>,
and call it <code class="docutils literal notranslate"><span class="pre">mid</span></code>. Compare the card at <code class="docutils literal notranslate"><span class="pre">mid</span></code> to the card you are
looking for.</p></li>
<li><p>If you found it, stop.</p></li>
<li><p>If the card at <code class="docutils literal notranslate"><span class="pre">mid</span></code> is higher than your card, search in the range
from <code class="docutils literal notranslate"><span class="pre">low</span></code> to <code class="docutils literal notranslate"><span class="pre">mid-1</span></code>.</p></li>
<li><p>If the card at <code class="docutils literal notranslate"><span class="pre">mid</span></code> is lower than your card, search in the range
from <code class="docutils literal notranslate"><span class="pre">mid+1</span></code> to <code class="docutils literal notranslate"><span class="pre">high</span></code>.</p></li>
</ol>
<p>Steps 3 and 4 look suspiciously like recursive invocations. Here’s what
this all looks like translated into C++:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">const</span> <span class="n">Card</span><span class="o">&amp;</span> <span class="n">card</span><span class="p">,</span> <span class="n">const</span> <span class="n">apvector</span><span class="o">&lt;</span><span class="n">Card</span><span class="o">&gt;&amp;</span> <span class="n">deck</span><span class="p">,</span>
                <span class="nb">int</span> <span class="n">low</span><span class="p">,</span> <span class="nb">int</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">high</span> <span class="o">+</span> <span class="n">low</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

  <span class="o">//</span> <span class="k">if</span> <span class="n">we</span> <span class="n">found</span> <span class="n">the</span> <span class="n">card</span><span class="p">,</span> <span class="k">return</span> <span class="n">its</span> <span class="n">index</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">equals</span> <span class="p">(</span><span class="n">deck</span><span class="p">[</span><span class="n">mid</span><span class="p">],</span> <span class="n">card</span><span class="p">))</span> <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>

  <span class="o">//</span> <span class="n">otherwise</span><span class="p">,</span> <span class="n">compare</span> <span class="n">the</span> <span class="n">card</span> <span class="n">to</span> <span class="n">the</span> <span class="n">middle</span> <span class="n">card</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">deck</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">.</span><span class="n">isGreater</span> <span class="p">(</span><span class="n">card</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">search</span> <span class="n">the</span> <span class="n">first</span> <span class="n">half</span> <span class="n">of</span> <span class="n">the</span> <span class="n">deck</span>
    <span class="k">return</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">deck</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">search</span> <span class="n">the</span> <span class="n">second</span> <span class="n">half</span> <span class="n">of</span> <span class="n">the</span> <span class="n">deck</span>
    <span class="k">return</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">deck</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Although this code contains the kernel of a bisection search, it is
still missing a piece. As it is currently written, if the card is not in
the deck, it will recurse forever. We need a way to detect this
condition and deal with it properly (by returning <code class="docutils literal notranslate"><span class="pre">-1</span></code>).</p>
<p>The easiest way to tell that your card is not in the deck is if there
are <em>no</em> cards in the deck, which is the case if <code class="docutils literal notranslate"><span class="pre">high</span></code> is less than
<code class="docutils literal notranslate"><span class="pre">low</span></code>. Well, there are still cards in the deck, of course, but what I
mean is that there are no cards in the segment of the deck indicated by
<code class="docutils literal notranslate"><span class="pre">low</span></code> and <code class="docutils literal notranslate"><span class="pre">high</span></code>.</p>
<p>With that line added, the function works correctly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">const</span> <span class="n">Card</span><span class="o">&amp;</span> <span class="n">card</span><span class="p">,</span> <span class="n">const</span> <span class="n">apvector</span><span class="o">&lt;</span><span class="n">Card</span><span class="o">&gt;&amp;</span> <span class="n">deck</span><span class="p">,</span>
                <span class="nb">int</span> <span class="n">low</span><span class="p">,</span> <span class="nb">int</span> <span class="n">high</span><span class="p">)</span> <span class="p">{</span>

  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">low</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">high</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">high</span> <span class="o">&lt;</span> <span class="n">low</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

  <span class="nb">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">high</span> <span class="o">+</span> <span class="n">low</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">equals</span> <span class="p">(</span><span class="n">deck</span><span class="p">[</span><span class="n">mid</span><span class="p">],</span> <span class="n">card</span><span class="p">))</span> <span class="k">return</span> <span class="n">mid</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">deck</span><span class="p">[</span><span class="n">mid</span><span class="p">]</span><span class="o">.</span><span class="n">isGreater</span> <span class="p">(</span><span class="n">card</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">deck</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">deck</span><span class="p">,</span> <span class="n">mid</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>I added an output statement at the beginning so I could watch the
sequence of recursive calls and convince myself that it would eventually
reach the base case. I tried out the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">findBisect</span> <span class="p">(</span><span class="n">deck</span><span class="p">[</span><span class="mi">23</span><span class="p">],</span> <span class="n">deck</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">51</span><span class="p">);</span>
</pre></div>
</div>
<p>And got the following output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span> <span class="mi">51</span>
<span class="mi">0</span><span class="p">,</span> <span class="mi">24</span>
<span class="mi">13</span><span class="p">,</span> <span class="mi">24</span>
<span class="mi">19</span><span class="p">,</span> <span class="mi">24</span>
<span class="mi">22</span><span class="p">,</span> <span class="mi">24</span>
<span class="n">I</span> <span class="n">found</span> <span class="n">the</span> <span class="n">card</span> <span class="n">at</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">23</span>
</pre></div>
</div>
<p>Then I made up a card that is not in the deck (the 15 of Diamonds), and
tried to find it. I got the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span> <span class="mi">51</span>
<span class="mi">0</span><span class="p">,</span> <span class="mi">24</span>
<span class="mi">13</span><span class="p">,</span> <span class="mi">24</span>
<span class="mi">13</span><span class="p">,</span> <span class="mi">17</span>
<span class="mi">13</span><span class="p">,</span> <span class="mi">14</span>
<span class="mi">13</span><span class="p">,</span> <span class="mi">12</span>
<span class="n">I</span> <span class="n">found</span> <span class="n">the</span> <span class="n">card</span> <span class="n">at</span> <span class="n">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
<p>These tests don’t prove that this program is correct. In fact, no amount
of testing can prove that a program is correct. On the other hand, by
looking at a few cases and examining the code, you might be able to
convince yourself.</p>

<div data-childcomponent="12_9" class="runestone explainer ac_section alert alert-warning">
<p>The code below searches finds the same card from the same deck we used on the previous page.
This time, it uses bisection search to locate the card.</p>

<textarea data-component="activecode" id=12_9 data-lang="cpp" 
      data-timelimit=25000  data-codelens="true"   
    data-audio=''      
           data-wasm=/_static>
#include <iostream>
#include <string>
#include <vector>
using namespace std;

struct Card {
    int suit, rank;

    Card ();
    Card (int s, int r);
    void print () const;
    bool isGreater (const Card& c2) const;
};

vector<Card> buildDeck();

bool equals (const Card& c1, const Card& c2){
    return (c1.rank == c2.rank && c1.suit == c2.suit);
}

void printDeck(const vector<Card>& deck);
int find (const Card& card, const vector<Card>& deck);
int findBisect (const Card& card, const vector<Card>& deck, int low, int high);

int main() {
    vector<Card> deck = buildDeck();
    Card card (3, 6);
    cout << findBisect(card, deck, 0, 51);
}

====

Card::Card () {
   suit = 0;  rank = 0;
}

Card::Card (int s, int r) {
   suit = s;  rank = r;
}

void Card::print () const {
   vector<string> suits (4);
   suits[0] = "Clubs";
   suits[1] = "Diamonds";
   suits[2] = "Hearts";
   suits[3] = "Spades";

   vector<string> ranks (14);
   ranks[1] = "Ace";
   ranks[2] = "2";
   ranks[3] = "3";
   ranks[4] = "4";
   ranks[5] = "5";
   ranks[6] = "6";
   ranks[7] = "7";
   ranks[8] = "8";
   ranks[9] = "9";
   ranks[10] = "10";
   ranks[11] = "Jack";
   ranks[12] = "Queen";
   ranks[13] = "King";

   cout << ranks[rank] << " of " << suits[suit] << endl;
 }

vector<Card> buildDeck() {
   vector<Card> deck (52);
   int i = 0;
   for (int suit = 0; suit <= 3; suit++) {
      for (int rank = 1; rank <= 13; rank++) {
         deck[i].suit = suit;
         deck[i].rank = rank;
         i++;
      }
   }
   return deck;
}

 void printDeck (const vector<Card>& deck) {
   for (size_t i = 0; i < deck.size(); i++) {
     deck[i].print ();
   }
 }

int find (const Card& card, const vector<Card>& deck) {
   for (size_t i = 0; i < deck.size(); i++) {
    if (equals (deck[i], card)) return i;
   }
   return -1;
}

int findBisect (const Card& card, const vector<Card>& deck, int low, int high) {

   cout << low << ", " << high << endl;

   if (high < low) return -1;

   int mid = (high + low) / 2;

   if (equals (deck[mid], card)) return mid;

   if (deck[mid].isGreater (card)) {
      return findBisect (card, deck, low, mid-1);
   } else {
      return findBisect (card, deck, mid+1, high);
   }
}
bool Card::isGreater (const Card& c2) const {
  if (suit > c2.suit) return true;
  if (suit < c2.suit) return false;

  if (rank > c2.rank) return true;
  if (rank < c2.rank) return false;

  return false;
}
</textarea>
</div>
<p>The number of recursive calls is fairly small, typically 6 or 7. That
means we only had to call <code class="docutils literal notranslate"><span class="pre">equals</span></code> and <code class="docutils literal notranslate"><span class="pre">isGreater</span></code> 6 or 7 times,
compared to up to 52 times if we did a linear search. In general,
bisection is much faster than a linear search, especially for large
vectors.</p>
<p>Two common errors in recursive programs are forgetting to include a base
case and writing the recursive call so that the base case is never
reached. Either error will cause an infinite recursion, in which case
C++ will (eventually) generate a run-time error.</p>

            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="bisection_search_1" >
            <p>Q-1: You are given a list of spelling words where the words are <strong>not sorted</strong> in any way.
What search method should you use?</p>

            <li data-component="answer" data-correct id="bisection_search_1_opt_a">linear search</li><li data-component="feedback">Correct! No search is faster than linear search when elements are not sorted.</li>
            
            <li data-component="answer"  id="bisection_search_1_opt_b">bisection search</li><li data-component="feedback">Incorrect! Bisection sort does not work on unsorted elements.</li>
            
            <li data-component="answer"  id="bisection_search_1_opt_c">both methods will work, but linear search is more efficient</li><li data-component="feedback">Incorrect! Bisection sort does not work on unsorted elements.</li>
            
            <li data-component="answer"  id="bisection_search_1_opt_d">both methods will work, but bisection search is more efficient</li><li data-component="feedback">Incorrect! Bisection sort does not work on unsorted elements.</li>
            

            </ul>
            </div>
            
            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-multipleanswers="false"  id="bisection_search_2" >
            <p>Q-2: You are given the same list of spelling words, but this time the words are <strong>sorted alphabetically</strong>.
What search method should you use this time?</p>

            <li data-component="answer"  id="bisection_search_2_opt_a">linear search</li><li data-component="feedback">Incorrect! You could use linear search, but it is not the only option.</li>
            
            <li data-component="answer"  id="bisection_search_2_opt_b">bisection search</li><li data-component="feedback">Incorrect! You could use bisection search, but it is not the only option.</li>
            
            <li data-component="answer"  id="bisection_search_2_opt_c">both methods will work, but linear search is more efficient</li><li data-component="feedback">Incorrect! Both methods will work, but linear search is not the most efficient method.</li>
            
            <li data-component="answer" data-correct id="bisection_search_2_opt_d">both methods will work, but bisection search is more efficient</li><li data-component="feedback">Correct! When elements are sorted, bisection search is much quicker.</li>
            

            </ul>
            </div>
            
            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-multipleanswers="true"  id="bisection_search_3" >
            <p>Q-3: When writing a recursive function, which of the following will result in infinite recursion?</p>

            <li data-component="answer"  id="bisection_search_3_opt_a">having more than one recursive call</li><li data-component="feedback">Incorrect! You are allowed to make multiple recursive calls inside of a function! You might do this if there is more than one condition.</li>
            
            <li data-component="answer" data-correct id="bisection_search_3_opt_b">not including a base case</li><li data-component="feedback">Correct! You always need a base case!</li>
            
            <li data-component="answer" data-correct id="bisection_search_3_opt_c">writing recursive calls such that the base case is never reached</li><li data-component="feedback">Correct! If you never reach the base case, the program will never stop making recursive calls.</li>
            
            <li data-component="answer"  id="bisection_search_3_opt_d">having more than one base case</li><li data-component="feedback">Incorrect! You are allowed to have multiple base cases. This is often necessary!</li>
            

            </ul>
            </div>
            
        <div class="runestone">
        <div data-component="fillintheblank" id="bisection_search_4" >
            <p>Q-4: How many recursive calls are used to locate the King of Hearts? (Hearts = suit 2, King = rank 13).</p>
<input type="text">
        <script type="application/json">
            [[{"number": [2, 2], "feedback": "<p>Correct!</p>\n"}, {"regex": "^\\s*x\\s*$", "regexFlags": "", "feedback": "<p>Incorrect! Change the input of <code class=\"docutils literal notranslate\"><span class=\"pre\">card</span></code> in the <code class=\"docutils literal notranslate\"><span class=\"pre\">int</span> <span class=\"pre\">main()</span></code> of the active code above, then take a look at the output.</p>\n"}]]
        </script>

        </div>
        </div>
            </div>


  <div id=scprogresscontainer>
    You have attempted <span id=scprogresstotal></span> of <span id=scprogressposs></span> activities on this page <div id="subchapterprogress"></div>
  </div>
  
      
<ul>
  <li id="relations-prev" style="opacity:0.4" onmouseover="mouseOverPrev()" onmouseout="mouseOutPrev()"class="navLink" title='Previous Section - 12.8. Searching' data-toggle="tooltip">
    <a href="searching.html" aria-label="12.8. Searching">
        <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
            <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
        </div>
    </a>
  </li>
</ul>

  
<ul>
  <li id="relations-next" style="opacity:0.4" onmouseover="mouseOverNext()" onmouseout="mouseOutNext()" class="navLink" title='Next Section - 12.10. Decks and subdecks' data-toggle="tooltip" >
    <a href="decks_and_subdecks.html" aria-label="12.10. Decks and subdecks">
      <div style="background-color: white; border-style:solid; border-color:lightgrey; border-width:2px; width:100px; height:50px">
          <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
      </div>
    </a>
  </li>
</ul>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>

<script>
	function mouseOverPrev() {
		document.getElementById("relations-prev").style.opacity=1;
	}

	function mouseOutPrev() {
		document.getElementById("relations-prev").style.opacity=0.4;
	}
	function mouseOverNext() {
		document.getElementById("relations-next").style.opacity=1;
	}

	function mouseOutNext() {
		document.getElementById("relations-next").style.opacity=0.4;
	}
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      
      <span id='numuserspan'></span><span class='loggedinuser'></span>
      
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020 - Based on How to Think Like a Computer Scientist.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> .
    </p>
  </div>
</footer>




<script> getSwitch(); </script>


  </body>
</html>