<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Classes and invariants &#8212; How to Think Like a Computer Scientist - C++</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=DB047029" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/presenter_mode.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jquery-ui-1.10.3.custom.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/user-highlights.css" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone-custom-sphinx-bootstrap.css?v=5.0.0" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-overrides.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/jquery.highlight.js?v=F1C496C8"></script>
    <script src="../_static/sql-wasm.js?v=44FE0709"></script>
    <script src="https://cdn.jsdelivr.net/npm/handsontable@7.2.2/dist/handsontable.full.js"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/pytutor-embed.bundle.js?v=268B5C04"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/Blob.js?v=AEC2447"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.bidi.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.emitter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.fallbacks.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.messagestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.parser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.5/jquery.i18n.language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script src="../_static/runestone.js?v=5.0.0"></script>
    <script src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="../_static/jquery-fix.js"></script>
    <script src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script src="../_static/bootstrap-sphinx.js"></script>
    <script src="../_static/waypoints.min.js"></script>
    <script src="../_static/jquery.idle-timer.js"></script>
    <script src="../_static/processing-1.4.1.min.js"></script>
    <script src="../_static/jquery.hotkey.js"></script>
    <script src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <script src="../_static/presenter_mode.js?v=5.0.0"></script>
    <script src="../_static/theme.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />

<script type="text/javascript">
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = true;
    eBookConfig.host = 'http://127.0.0.1:8000' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/runestone';
    eBookConfig.course = 'thinkcpp';
    eBookConfig.basecourse = 'thinkcpp';
    eBookConfig.isLoggedIn = false;
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = '' ? '' : 'python'
  eBookConfig.runestone_version = '';
  eBookConfig.jobehost = '';
  eBookConfig.proxyuri_runs = '';
  eBookConfig.proxyuri_files = '';
  eBookConfig.enable_chatcodes = false ? false : false;


</script>


<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar" aria-label="navbar toggle" class="visuallyhidden">toggle navbar</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
          <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          thinkcpp
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>


        <!-- social media dropdown -->
        
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-globe" style="opacity: 0.9"><span aria-label="Social" class="visuallyhidden">Social</span></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHNwYJKoZIhvcNAQcEoIIHKDCCByQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAcrkqh1hn3lYqIpfXxNqe1T82EhXzCJGy1yMAmklpyZshyMkfDGe1Bhx+iwyGeoYRTTyphFmP+9M3NyO0+Q5XdHxgZPx/zYjjBxlZHgEV6jhE8bN2fHkkPf0VHfz0a0QQylQOPlKiOTZV7B37Jpk6yM47oVZ1tG/KNm0NkfmB76DELMAkGBSsOAwIaBQAwgbQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIi0GmFfOlcjuAgZBbYOo9UO+CpMQa+PYqwsUmUnJvXIImeMeNI3KVTUx5Cfk9gNMo3WzPeiB5IqZo9nRAQ0mf1qL2ecLeB5tidM+lgBUhOxfj3/FecpnVFa0263gp4g+PLw8jzhvVRdUon1K3SeO1Rzh23fIRKwnrD6btt73uwtj0sl3tGd8qz+6GIcwPDdRk9VcUffiBJT/ZagKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xMzExMDMxMzQxMzFaMCMGCSqGSIb3DQEJBDEWBBRDJF8w+zsMr7FSk+pwinB5f5D4rzANBgkqhkiG9w0BAQEFAASBgHw1LMHpkpaqHIvDGdFE0eG+2mZlmMnUeDCBhQlbc7QMzFQYKTV94NfaebBO4PmNdADe1rq4WidSRZZbE7CzkX9IGENYnBTWY0hb2l0lGdGrJdGeWyV3ekg9WVaFMMumrekds96h3Cx7dGz2kWDzIai2iEXE/qoE+xpkyXAYZNV3-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li><!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span aria-label="Search" class="visuallyhidden">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"><span aria-label="User" class="visuallyhidden">User</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='/runestone/assignments/chooseAssignment.html'>Assignments</a></li>
            <li><a href='/runestone/assignments/practice'>Practice</a></li>
            <li class="divider"></li>
            
            <li><a href='/runestone/default/courses'>Change Course</a></li>
			      <li class="divider"></li>
            <li id="ip_dropdown_link"><a href='/runestone/admin/index'>Instructor's Page</a></li>
            
            <li><a href='/runestone/dashboard/studentreport'>Progress Page</a></li>
            <li class="divider"></li>
            
            <li><a href="/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="/runestone/default/user/register" id="registerlink">Register</a></li>
            
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
			<!-- dark mode toggle -->
             <li><label class="theme-switch" for="checkbox">
					  <input type="checkbox" id="checkbox" onchange="switchTheme()" />
							<div class="slider round"></div>
					</label>Dark Mode</li>
			 </ul>
        </li>
        <!-- end user account dropdown -->
        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:ACFactory.toggleScratchActivecode()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span aria-label="Scratch Activecode" class="visuallyhidden">Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"><span aria-label="Help" class="visuallyhidden">Help</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='http://runestoneinteractive.org/pages/faq.html'>FAQ</a></li>
            <li><a href='https://runestone.academy/runestone/static/instructorguide/index.html'>Instructors Guide</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=thinkcpp&page=Chapter14'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>
      
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

      </div> <!-- navbar -->







    </div> <!-- container -->
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">
  
  <div class="section" id="classes-and-invariants">
<span id="class"></span><h1>Classes and invariants<a class="headerlink" href="#classes-and-invariants" title="Permalink to this headline">¶</a></h1>
<div class="section" id="private-data-and-classes">
<h2>Private data and classes<a class="headerlink" href="#private-data-and-classes" title="Permalink to this headline">¶</a></h2>
<p>I have used the word “encapsulation” in this book to refer to the
process of wrapping up a sequence of instructions in a function, in
order to separate the function’s interface (how to use it) from its
implementation (how it does what it does).</p>
<p>This kind of encapsulation might be called “functional encapsulation,”
to distinguish it from “data encapsulation,” which is the topic of this
chapter. Data encapsulation is based on the idea that each structure
definition should provide a set of functions that apply to the
structure, and prevent unrestricted access to the internal
representation.</p>
<p>One use of data encapsulation is to hide implementation details from
users or programmers that don’t need to know them.</p>
<p>For example, there are many possible representations for a <code class="docutils literal notranslate"><span class="pre">Card</span></code>,
including two integers, two strings and two enumerated types. The
programmer who writes the <code class="docutils literal notranslate"><span class="pre">Card</span></code> member functions needs to know which
implementation to use, but someone using the <code class="docutils literal notranslate"><span class="pre">Card</span></code> structure should
not have to know anything about its internal structure.</p>
<p>As another example, we have been using <code class="docutils literal notranslate"><span class="pre">apstring</span></code> and <code class="docutils literal notranslate"><span class="pre">apvector</span></code>
objects without ever discussing their implementations. There are many
possibilities, but as “clients” of these libraries, we don’t need to
know.</p>
<p>In C++, the most common way to enforce data encapsulation is to prevent
client programs from accessing the instance variables of an object. The
keyword <code class="docutils literal notranslate"><span class="pre">private</span></code> is used to protect parts of a structure definition.
For example, we could have written the <code class="docutils literal notranslate"><span class="pre">Card</span></code> definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">Card</span>
<span class="p">{</span>
<span class="n">private</span><span class="p">:</span>
  <span class="nb">int</span> <span class="n">suit</span><span class="p">,</span> <span class="n">rank</span><span class="p">;</span>

<span class="n">public</span><span class="p">:</span>
  <span class="n">Card</span> <span class="p">();</span>
  <span class="n">Card</span> <span class="p">(</span><span class="nb">int</span> <span class="n">s</span><span class="p">,</span> <span class="nb">int</span> <span class="n">r</span><span class="p">);</span>

  <span class="nb">int</span> <span class="n">getRank</span> <span class="p">()</span> <span class="n">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">rank</span><span class="p">;</span> <span class="p">}</span>
  <span class="nb">int</span> <span class="n">getSuit</span> <span class="p">()</span> <span class="n">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">suit</span><span class="p">;</span> <span class="p">}</span>
  <span class="n">void</span> <span class="n">setRank</span> <span class="p">(</span><span class="nb">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span> <span class="p">}</span>
  <span class="n">void</span> <span class="n">setSuit</span> <span class="p">(</span><span class="nb">int</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span> <span class="n">suit</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>There are two sections of this definition, a private part and a public
part. The functions are public, which means that they can be invoked by
client programs. The instance variables are private, which means that
they can be read and written only by <code class="docutils literal notranslate"><span class="pre">Card</span></code> member functions.</p>
<p>It is still possible for client programs to read and write the instance
variables using the <strong>accessor functions</strong> (the ones beginning with
<code class="docutils literal notranslate"><span class="pre">get</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span></code>). On the other hand, it is now easy to control which
operations clients can perform on which instance variables. For example,
it might be a good idea to make cards “read only” so that after they are
constructed, they cannot be changed. To do that, all we have to do is
remove the <code class="docutils literal notranslate"><span class="pre">set</span></code> functions.</p>
<p>Another advantage of using accessor functions is that we can change the
internal representations of cards without having to change any client
programs.</p>
</div>
<div class="section" id="what-is-a-class">
<h2>What is a class?<a class="headerlink" href="#what-is-a-class" title="Permalink to this headline">¶</a></h2>
<p>In most object-oriented programming languages, a <strong>class</strong> is a
user-defined type that includes a set of functions. As we have seen,
structures in C++ meet the general definition of a class.</p>
<p>But there is another feature in C++ that also meets this definition;
confusingly, it is called a <code class="docutils literal notranslate"><span class="pre">class</span></code>. In C++, a class is just a
structure whose instance variables are private by default. For example,
I could have written the <code class="docutils literal notranslate"><span class="pre">Card</span></code> definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Card</span>
<span class="p">{</span>
  <span class="nb">int</span> <span class="n">suit</span><span class="p">,</span> <span class="n">rank</span><span class="p">;</span>

<span class="n">public</span><span class="p">:</span>
  <span class="n">Card</span> <span class="p">();</span>
  <span class="n">Card</span> <span class="p">(</span><span class="nb">int</span> <span class="n">s</span><span class="p">,</span> <span class="nb">int</span> <span class="n">r</span><span class="p">);</span>

  <span class="nb">int</span> <span class="n">getRank</span> <span class="p">()</span> <span class="n">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">rank</span><span class="p">;</span> <span class="p">}</span>
  <span class="nb">int</span> <span class="n">getSuit</span> <span class="p">()</span> <span class="n">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">suit</span><span class="p">;</span> <span class="p">}</span>
  <span class="nb">int</span> <span class="n">setRank</span> <span class="p">(</span><span class="nb">int</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span> <span class="n">rank</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span> <span class="p">}</span>
  <span class="nb">int</span> <span class="n">setSuit</span> <span class="p">(</span><span class="nb">int</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span> <span class="n">suit</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>I replaced the word <code class="docutils literal notranslate"><span class="pre">struct</span></code> with the word <code class="docutils literal notranslate"><span class="pre">class</span></code> and removed the
<code class="docutils literal notranslate"><span class="pre">private:</span></code> label. This result of the two definitions is exactly the
same.</p>
<p>In fact, anything that can be written as a <code class="docutils literal notranslate"><span class="pre">struct</span></code> can also be
written as a <code class="docutils literal notranslate"><span class="pre">class</span></code>, just by adding or removing labels. There is no
real reason to choose one over the other, except that as a stylistic
choice, most C++ programmers use <code class="docutils literal notranslate"><span class="pre">class</span></code>.</p>
<p>Also, it is common to refer to all user-defined types in C++ as
“classes,” regardless of whether they are defined as a <code class="docutils literal notranslate"><span class="pre">struct</span></code> or a
<code class="docutils literal notranslate"><span class="pre">class</span></code>.</p>
</div>
<div class="section" id="complex-numbers">
<h2>Complex numbers<a class="headerlink" href="#complex-numbers" title="Permalink to this headline">¶</a></h2>
<p>As a running example for the rest of this chapter we will consider a
class definition for complex numbers. Complex numbers are useful for
many branches of mathematics and engineering, and many computations are
performed using complex arithmetic. A complex number is the sum of a
real part and an imaginary part, and is usually written in the form
<span class="math notranslate nohighlight">\(x + yi\)</span>, where <span class="math notranslate nohighlight">\(x\)</span> is the real part, <span class="math notranslate nohighlight">\(y\)</span> is the
imaginary part, and <span class="math notranslate nohighlight">\(i\)</span> represents the square root of -1.</p>
<p>The following is a class definition for a user-defined type called
<code class="docutils literal notranslate"><span class="pre">Complex</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Complex</span>
<span class="p">{</span>
  <span class="n">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">;</span>

<span class="n">public</span><span class="p">:</span>
  <span class="n">Complex</span> <span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
  <span class="n">Complex</span> <span class="p">(</span><span class="n">double</span> <span class="n">r</span><span class="p">,</span> <span class="n">double</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="n">real</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>  <span class="n">imag</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Because this is a <code class="docutils literal notranslate"><span class="pre">class</span></code> definition, the instance variables <code class="docutils literal notranslate"><span class="pre">real</span></code>
and <code class="docutils literal notranslate"><span class="pre">imag</span></code> are private, and we have to include the label <code class="docutils literal notranslate"><span class="pre">public:</span></code>
to allow client code to invoke the constructors.</p>
<p>As usual, there are two constructors: one takes no parameters and does
nothing; the other takes two parameters and uses them to initialize the
instance variables.</p>
<p>So far there is no real advantage to making the instance variables
private. Let’s make things a little more complicated; then the point
might be clearer.</p>
<p>There is another common representation for complex numbers that is
sometimes called “polar form” because it is based on polar coordinates.
Instead of specifying the real part and the imaginary part of a point in
the complex plane, polar coordinates specify the direction (or angle) of
the point relative to the origin, and the distance (or magnitude) of the
point.</p>
<p>The following figure shows the two coordinate systems graphically.</p>
<p>Complex numbers in polar coordinates are written <span class="math notranslate nohighlight">\(r e^{i \theta}\)</span>,
where <span class="math notranslate nohighlight">\(r\)</span> is the magnitude (radius), and <span class="math notranslate nohighlight">\(\theta\)</span> is the
angle in radians.</p>
<p>Fortunately, it is easy to convert from one form to another. To go from
Cartesian to polar,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
r       &amp; = &amp;  \sqrt{x^2 + y^2} \\
\theta  &amp; = &amp;  \arctan (y / x)\end{aligned}\end{split}\]</div>
<p>To go from polar to Cartesian,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
x       &amp; = &amp;  r \cos \theta \\
y       &amp; = &amp;  r \sin \theta\end{aligned}\end{split}\]</div>
<p>So which representation should we use? Well, the whole reason there are
multiple representations is that some operations are easier to perform
in Cartesian coordinates (like addition), and others are easier in polar
coordinates (like multiplication). One option is that we can write a
class definition that uses <em>both</em> representations, and that converts
between them automatically, as needed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Complex</span>
<span class="p">{</span>
  <span class="n">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">;</span>
  <span class="n">double</span> <span class="n">mag</span><span class="p">,</span> <span class="n">theta</span><span class="p">;</span>
  <span class="nb">bool</span> <span class="n">cartesian</span><span class="p">,</span> <span class="n">polar</span><span class="p">;</span>

<span class="n">public</span><span class="p">:</span>
  <span class="n">Complex</span> <span class="p">()</span> <span class="p">{</span> <span class="n">cartesian</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>  <span class="n">polar</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">Complex</span> <span class="p">(</span><span class="n">double</span> <span class="n">r</span><span class="p">,</span> <span class="n">double</span> <span class="n">i</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>  <span class="n">imag</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">cartesian</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>  <span class="n">polar</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>There are now six instance variables, which means that this
representation will take up more space than either of the others, but we
will see that it is very versatile.</p>
<p>Four of the instance variables are self-explanatory. They contain the
real part, the imaginary part, the angle and the magnitude of the
complex number. The other two variables, <code class="docutils literal notranslate"><span class="pre">cartesian</span></code> and <code class="docutils literal notranslate"><span class="pre">polar</span></code> are
flags that indicate whether the corresponding values are currently
valid.</p>
<p>For example, the do-nothing constructor sets both flags to false to
indicate that this object does not contain a valid complex number (yet),
in either representation.</p>
<p>The second constructor uses the parameters to initialize the real and
imaginary parts, but it does not calculate the magnitude or angle.
Setting the <code class="docutils literal notranslate"><span class="pre">polar</span></code> flag to false warns other functions not to access
<code class="docutils literal notranslate"><span class="pre">mag</span></code> or <code class="docutils literal notranslate"><span class="pre">theta</span></code> until they have been set.</p>
<p>Now it should be clearer why we need to keep the instance variables
private. If client programs were allowed unrestricted access, it would
be easy for them to make errors by reading uninitialized values. In the
next few sections, we will develop accessor functions that will make
those kinds of mistakes impossible.</p>
</div>
<div class="section" id="accessor-functions">
<h2>Accessor functions<a class="headerlink" href="#accessor-functions" title="Permalink to this headline">¶</a></h2>
<p>By convention, accessor functions have names that begin with <code class="docutils literal notranslate"><span class="pre">get</span></code> and
end with the name of the instance variable they fetch. The return type,
naturally, is the type of the corresponding instance variable.</p>
<p>In this case, the accessor functions give us an opportunity to make sure
that the value of the variable is valid before we return it. Here’s what
<code class="docutils literal notranslate"><span class="pre">getReal</span></code> looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">double</span> <span class="n">Complex</span><span class="p">::</span><span class="n">getReal</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">cartesian</span> <span class="o">==</span> <span class="n">false</span><span class="p">)</span> <span class="n">calculateCartesian</span> <span class="p">();</span>
  <span class="k">return</span> <span class="n">real</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">cartesian</span></code> flag is true then <code class="docutils literal notranslate"><span class="pre">real</span></code> contains valid data, and
we can just return it. Otherwise, we have to call <code class="docutils literal notranslate"><span class="pre">calculateCartesian</span></code>
to convert from polar coordinates to Cartesian coordinates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">calculateCartesian</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">cos</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">imag</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">sin</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">cartesian</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Assuming that the polar coordinates are valid, we can calculate the
Cartesian coordinates using the formulas from the previous section. Then
we set the <code class="docutils literal notranslate"><span class="pre">cartesian</span></code> flag, indicating that <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code> now
contain valid data.</p>
<p>As an exercise, write a corresponding function called <code class="docutils literal notranslate"><span class="pre">calculatePolar</span></code>
and then write <code class="docutils literal notranslate"><span class="pre">getMag</span></code> and <code class="docutils literal notranslate"><span class="pre">getTheta</span></code>. One unusual thing about
these accessor functions is that they are not <code class="docutils literal notranslate"><span class="pre">const</span></code>, because
invoking them might modify the instance variables.</p>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>As usual when we define a new class, we want to be able to output
objects in a human-readable form. For <code class="docutils literal notranslate"><span class="pre">Complex</span></code> objects, we could use
two functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">printCartesian</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">getReal</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot; + &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">getImag</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;i&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">printPolar</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">getMag</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot; e^ &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">getTheta</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;i&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The nice thing here is that we can output any <code class="docutils literal notranslate"><span class="pre">Complex</span></code> object in
either format without having to worry about the representation. Since
the output functions use the accessor functions, the program will
compute automatically any values that are needed.</p>
<p>The following code creates a <code class="docutils literal notranslate"><span class="pre">Complex</span></code> object using the second
constructor. Initially, it is in Cartesian format only. When we invoke
<code class="docutils literal notranslate"><span class="pre">printCartesian</span></code> it accesses <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code> without having to
do any conversions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Complex</span> <span class="n">c1</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">);</span>

<span class="n">c1</span><span class="o">.</span><span class="n">printCartesian</span><span class="p">();</span>
<span class="n">c1</span><span class="o">.</span><span class="n">printPolar</span><span class="p">();</span>
</pre></div>
</div>
<p>When we invoke <code class="docutils literal notranslate"><span class="pre">printPolar</span></code>, and <code class="docutils literal notranslate"><span class="pre">printPolar</span></code> invokes <code class="docutils literal notranslate"><span class="pre">getMag</span></code>,
the program is forced to convert to polar coordinates and store the
results in the instance variables. The good news is that we only have to
do the conversion once. When <code class="docutils literal notranslate"><span class="pre">printPolar</span></code> invokes <code class="docutils literal notranslate"><span class="pre">getTheta</span></code>, it
will see that the polar coordinates are valid and return <code class="docutils literal notranslate"><span class="pre">theta</span></code>
immediately.</p>
<p>The output of this code is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="n">i</span>
<span class="mf">3.60555</span> <span class="n">e</span><span class="o">^</span> <span class="mf">0.982794</span><span class="n">i</span>
</pre></div>
</div>
</div>
<div class="section" id="a-function-on-complex-numbers">
<h2>A function on <code class="docutils literal notranslate"><span class="pre">Complex</span></code> numbers<a class="headerlink" href="#a-function-on-complex-numbers" title="Permalink to this headline">¶</a></h2>
<p>A natural operation we might want to perform on complex numbers is
addition. If the numbers are in Cartesian coordinates, addition is easy:
you just add the real parts together and the imaginary parts together.
If the numbers are in polar coordinates, it is easiest to convert them
to Cartesian coordinates and then add them.</p>
<p>Again, it is easy to deal with these cases if we use the accessor
functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Complex</span> <span class="n">add</span> <span class="p">(</span><span class="n">Complex</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">double</span> <span class="n">real</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getReal</span><span class="p">()</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">getReal</span><span class="p">();</span>
  <span class="n">double</span> <span class="n">imag</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getImag</span><span class="p">()</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">getImag</span><span class="p">();</span>
  <span class="n">Complex</span> <span class="nb">sum</span> <span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">);</span>
  <span class="k">return</span> <span class="nb">sum</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice that the arguments to <code class="docutils literal notranslate"><span class="pre">add</span></code> are not <code class="docutils literal notranslate"><span class="pre">const</span></code> because they
might be modified when we invoke the accessors. To invoke this function,
we would pass both operands as arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Complex</span> <span class="n">c1</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">);</span>
<span class="n">Complex</span> <span class="n">c2</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">);</span>

<span class="n">Complex</span> <span class="nb">sum</span> <span class="o">=</span> <span class="n">add</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">);</span>
<span class="nb">sum</span><span class="o">.</span><span class="n">printCartesian</span><span class="p">();</span>
</pre></div>
</div>
<p>The output of this program is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="o">+</span> <span class="mi">7</span><span class="n">i</span>
</pre></div>
</div>
</div>
<div class="section" id="another-function-on-complex-numbers">
<h2>Another function on <code class="docutils literal notranslate"><span class="pre">Complex</span></code> numbers<a class="headerlink" href="#another-function-on-complex-numbers" title="Permalink to this headline">¶</a></h2>
<p>Another operation we might want is multiplication. Unlike addition,
multiplication is easy if the numbers are in polar coordinates and hard
if they are in Cartesian coordinates (well, a little harder, anyway).</p>
<p>In polar coordinates, we can just multiply the magnitudes and add the
angles. As usual, we can use the accessor functions without worrying
about the representation of the objects.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Complex</span> <span class="n">mult</span> <span class="p">(</span><span class="n">Complex</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">Complex</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">double</span> <span class="n">mag</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getMag</span><span class="p">()</span> <span class="o">*</span> <span class="n">b</span><span class="o">.</span><span class="n">getMag</span><span class="p">()</span>
  <span class="n">double</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getTheta</span><span class="p">()</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">getTheta</span><span class="p">();</span>
  <span class="n">Complex</span> <span class="n">product</span><span class="p">;</span>
  <span class="n">product</span><span class="o">.</span><span class="n">setPolar</span> <span class="p">(</span><span class="n">mag</span><span class="p">,</span> <span class="n">theta</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">product</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A small problem we encounter here is that we have no constructor that
accepts polar coordinates. It would be nice to write one, but remember
that we can only overload a function (even a constructor) if the
different versions take different parameters. In this case, we would
like a second constructor that also takes two <code class="docutils literal notranslate"><span class="pre">double</span></code>s, and we
can’t have that.</p>
<p>An alternative it to provide an accessor function that <em>sets</em> the
instance variables. In order to do that properly, though, we have to
make sure that when <code class="docutils literal notranslate"><span class="pre">mag</span></code> and <code class="docutils literal notranslate"><span class="pre">theta</span></code> are set, we also set the
<code class="docutils literal notranslate"><span class="pre">polar</span></code> flag. At the same time, we have to make sure that the
<code class="docutils literal notranslate"><span class="pre">cartesian</span></code> flag is unset. That’s because if we change the polar
coordinates, the cartesian coordinates are no longer valid.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">setPolar</span> <span class="p">(</span><span class="n">double</span> <span class="n">m</span><span class="p">,</span> <span class="n">double</span> <span class="n">t</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">mag</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>  <span class="n">theta</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
  <span class="n">cartesian</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>  <span class="n">polar</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As an exercise, write the corresponding function named <code class="docutils literal notranslate"><span class="pre">setCartesian</span></code>.</p>
<p>To test the <code class="docutils literal notranslate"><span class="pre">mult</span></code> function, we can try something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Complex</span> <span class="n">c1</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">);</span>
<span class="n">Complex</span> <span class="n">c2</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">);</span>

<span class="n">Complex</span> <span class="n">product</span> <span class="o">=</span> <span class="n">mult</span> <span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">);</span>
<span class="n">product</span><span class="o">.</span><span class="n">printCartesian</span><span class="p">();</span>
</pre></div>
</div>
<p>The output of this program is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mi">6</span> <span class="o">+</span> <span class="mi">17</span><span class="n">i</span>
</pre></div>
</div>
<p>There is a lot of conversion going on in this program behind the scenes.
When we call <code class="docutils literal notranslate"><span class="pre">mult</span></code>, both arguments get converted to polar
coordinates. The result is also in polar format, so when we invoke
<code class="docutils literal notranslate"><span class="pre">printCartesian</span></code> it has to get converted back. Really, it’s amazing
that we get the right answer!</p>
</div>
<div class="section" id="invariants">
<h2>Invariants<a class="headerlink" href="#invariants" title="Permalink to this headline">¶</a></h2>
<p>There are several conditions we expect to be true for a proper
<code class="docutils literal notranslate"><span class="pre">Complex</span></code> object. For example, if the <code class="docutils literal notranslate"><span class="pre">cartesian</span></code> flag is set then
we expect <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code> to contain valid data. Similarly, if
<code class="docutils literal notranslate"><span class="pre">polar</span></code> is set, we expect <code class="docutils literal notranslate"><span class="pre">mag</span></code> and <code class="docutils literal notranslate"><span class="pre">theta</span></code> to be valid. Finally,
if both flags are set then we expect the other four variables to be
consistent; that is, they should be specifying the same point in two
different formats.</p>
<p>These kinds of conditions are called <code class="docutils literal notranslate"><span class="pre">invariants</span></code>, for the obvious
reason that they do not vary—they are always supposed to be true. One of
the ways to write good quality code that contains few bugs is to figure
out what invariants are appropriate for your classes, and write code
that makes it impossible to violate them.</p>
<p>One of the primary things that data encapsulation is good for is helping
to enforce invariants. The first step is to prevent unrestricted access
to the instance variables by making them private. Then the only way to
modify the object is through accessor functions and modifiers. If we
examine all the accessors and modifiers, and we can show that every one
of them maintains the invariants, then we can prove that it is
impossible for an invariant to be violated.</p>
<p>Looking at the <code class="docutils literal notranslate"><span class="pre">Complex</span></code> class, we can list the functions that make
assignments to one or more instance variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">the</span> <span class="n">second</span> <span class="n">constructor</span>
<span class="n">calculateCartesian</span>
<span class="n">calculatePolar</span>
<span class="n">setCartesian</span>
<span class="n">setPolar</span>
</pre></div>
</div>
<p>In each case, it is straightforward to show that the function maintains
each of the invariants I listed. We have to be a little careful, though.
Notice that I said “maintain” the invariant. What that means is “If the
invariant is true when the function is called, it will still be true
when the function is complete.”</p>
<p>That definition allows two loopholes. First, there may be some point in
the middle of the function when the invariant is not true. That’s ok,
and in some cases unavoidable. As long as the invariant is restored by
the end of the function, all is well.</p>
<p>The other loophole is that we only have to maintain the invariant if it
was true at the beginning of the function. Otherwise, all bets are off.
If the invariant was violated somewhere else in the program, usually the
best we can do is detect the error, output an error message, and exit.</p>
</div>
<div class="section" id="preconditions">
<h2>Preconditions<a class="headerlink" href="#preconditions" title="Permalink to this headline">¶</a></h2>
<p>Often when you write a function you make implicit assumptions about the
parameters you receive. If those assumptions turn out to be true, then
everything is fine; if not, your program might crash.</p>
<p>To make your programs more robust, it is a good idea to think about your
assumptions explicitly, document them as part of the program, and maybe
write code that checks them.</p>
<p>For example, let’s take another look at <code class="docutils literal notranslate"><span class="pre">calculateCartesian</span></code>. Is there
an assumption we make about the current object? Yes, we assume that the
<code class="docutils literal notranslate"><span class="pre">polar</span></code> flag is set and that <code class="docutils literal notranslate"><span class="pre">mag</span></code> and <code class="docutils literal notranslate"><span class="pre">theta</span></code> contain valid data.
If that is not true, then this function will produce meaningless
results.</p>
<p>One option is to add a comment to the function that warns programmers
about the <strong>precondition</strong>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">calculateCartesian</span> <span class="p">()</span>
<span class="o">//</span> <span class="n">precondition</span><span class="p">:</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">object</span> <span class="n">contains</span> <span class="n">valid</span> <span class="n">polar</span> <span class="n">coordinates</span>
    <span class="ow">and</span> <span class="n">the</span> <span class="n">polar</span> <span class="n">flag</span> <span class="ow">is</span> <span class="nb">set</span>
<span class="o">//</span> <span class="n">postcondition</span><span class="p">:</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">object</span> <span class="n">will</span> <span class="n">contain</span> <span class="n">valid</span> <span class="n">Cartesian</span>
    <span class="n">coordinates</span> <span class="ow">and</span> <span class="n">valid</span> <span class="n">polar</span> <span class="n">coordinates</span><span class="p">,</span> <span class="ow">and</span> <span class="n">both</span> <span class="n">the</span> <span class="n">cartesian</span>
    <span class="n">flag</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">polar</span> <span class="n">flag</span> <span class="n">will</span> <span class="n">be</span> <span class="nb">set</span>
<span class="p">{</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">cos</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">imag</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">sin</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">cartesian</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>At the same time, I also commented on the <strong>postconditions</strong>, the things
we know will be true when the function completes.</p>
<p>These comments are useful for people reading your programs, but it is an
even better idea to add code that <em>checks</em> the preconditions, so that we
can print an appropriate error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">calculateCartesian</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">polar</span> <span class="o">==</span> <span class="n">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span>
    <span class="s2">&quot;calculateCartesian failed because the polar representation is invalid&quot;</span>
     <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">exit</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">cos</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">imag</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">sin</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">cartesian</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">exit</span></code> function causes the program to quit immediately. The return
value is an error code that tells the system (or whoever executed the
program) that something went wrong.</p>
<p>This kind of error-checking is so common that C++ provides a built-in
function to check preconditions and print error messages. If you include
the <code class="docutils literal notranslate"><span class="pre">assert.h</span></code> header file, you get a function called <code class="docutils literal notranslate"><span class="pre">assert</span></code> that
takes a boolean value (or a conditional expression) as an argument. As
long as the argument is true, <code class="docutils literal notranslate"><span class="pre">assert</span></code> does nothing. If the argument
is false, assert prints an error message and quits. Here’s how to use
it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">Complex</span><span class="p">::</span><span class="n">calculateCartesian</span> <span class="p">()</span>
<span class="p">{</span>
  <span class="k">assert</span> <span class="p">(</span><span class="n">polar</span><span class="p">);</span>
  <span class="n">real</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">cos</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">imag</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="n">sin</span> <span class="p">(</span><span class="n">theta</span><span class="p">);</span>
  <span class="n">cartesian</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
  <span class="k">assert</span> <span class="p">(</span><span class="n">polar</span> <span class="o">&amp;&amp;</span> <span class="n">cartesian</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement checks the precondition (actually just
part of it); the second <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement checks the postcondition.</p>
<p>In my development environment, I get the following message when I
violate an assertion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Complex.cpp:63: void Complex::calculatePolar(): Assertion `cartesian&#39; failed.
Abort
</pre></div>
</div>
<p>There is a lot of information here to help me track down the error,
including the file name and line number of the assertion that failed,
the function name and the contents of the assert statement.</p>
</div>
<div class="section" id="private-functions">
<h2>Private functions<a class="headerlink" href="#private-functions" title="Permalink to this headline">¶</a></h2>
<p>In some cases, there are member functions that are used internally by a
class, but that should not be invoked by client programs. For example,
<code class="docutils literal notranslate"><span class="pre">calculatePolar</span></code> and <code class="docutils literal notranslate"><span class="pre">calculateCartesian</span></code> are used by the accessor
functions, but there is probably no reason clients should call them
directly (although it would not do any harm). If we wanted to protect
these functions, we could declare them <code class="docutils literal notranslate"><span class="pre">private</span></code> the same way we do
with instance variables. In that case the complete class definition for
<code class="docutils literal notranslate"><span class="pre">Complex</span></code> would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Complex</span>
<span class="p">{</span>
<span class="n">private</span><span class="p">:</span>
  <span class="n">double</span> <span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">;</span>
  <span class="n">double</span> <span class="n">mag</span><span class="p">,</span> <span class="n">theta</span><span class="p">;</span>
  <span class="nb">bool</span> <span class="n">cartesian</span><span class="p">,</span> <span class="n">polar</span><span class="p">;</span>

  <span class="n">void</span> <span class="n">calculateCartesian</span> <span class="p">();</span>
  <span class="n">void</span> <span class="n">calculatePolar</span> <span class="p">();</span>

<span class="n">public</span><span class="p">:</span>
  <span class="n">Complex</span> <span class="p">()</span> <span class="p">{</span> <span class="n">cartesian</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>  <span class="n">polar</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span> <span class="p">}</span>

  <span class="n">Complex</span> <span class="p">(</span><span class="n">double</span> <span class="n">r</span><span class="p">,</span> <span class="n">double</span> <span class="n">i</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>  <span class="n">imag</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">cartesian</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>  <span class="n">polar</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">void</span> <span class="n">printCartesian</span> <span class="p">();</span>
  <span class="n">void</span> <span class="n">printPolar</span> <span class="p">();</span>

  <span class="n">double</span> <span class="n">getReal</span> <span class="p">();</span>
  <span class="n">double</span> <span class="n">getImag</span> <span class="p">();</span>
  <span class="n">double</span> <span class="n">getMag</span> <span class="p">();</span>
  <span class="n">double</span> <span class="n">getTheta</span> <span class="p">();</span>

  <span class="n">void</span> <span class="n">setCartesian</span> <span class="p">(</span><span class="n">double</span> <span class="n">r</span><span class="p">,</span> <span class="n">double</span> <span class="n">i</span><span class="p">);</span>
  <span class="n">void</span> <span class="n">setPolar</span> <span class="p">(</span><span class="n">double</span> <span class="n">m</span><span class="p">,</span> <span class="n">double</span> <span class="n">t</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">private</span></code> label at the beginning is not necessary, but it is a
useful reminder.</p>
</div>
<div class="section" id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>class:</dt><dd><p>In general use, a class is a user-defined type with member functions.
In C++, a class is a structure with private instance variables.</p>
</dd>
<dt>accessor function:</dt><dd><p>A function that provides access (read or write) to a private instance
variable.</p>
</dd>
<dt>invariant:</dt><dd><p>A condition, usually pertaining to an object, that should be true at
all times in client code, and that should be maintained by all member
functions.</p>
</dd>
<dt>precondition:</dt><dd><p>A condition that is assumed to be true at the beginning of a
function. If the precondition is not true, the function may not work.
It is often a good idea for functions to check their preconditions,
if possible.</p>
</dd>
<dt>postcondition:</dt><dd><p>A condition that is true at the end of a function.</p>
</dd>
</dl>
</div>
</div>


  <div id=scprogresscontainer>
    You have attempted <span id=scprogresstotal></span> of <span id=scprogressposs></span> activities on this page <div id="subchapterprogress"></div>
  </div>
  
      

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});

</script>

<script>
	function mouseOverPrev() {
		document.getElementById("relations-prev").style.opacity=1;
	}

	function mouseOutPrev() {
		document.getElementById("relations-prev").style.opacity=0.4;
	}
	function mouseOverNext() {
		document.getElementById("relations-next").style.opacity=1;
	}

	function mouseOutNext() {
		document.getElementById("relations-next").style.opacity=0.4;
	}
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      
      <span id='numuserspan'></span><span class='loggedinuser'></span>
      
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020 - Based on How to Think Like a Computer Scientist.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> .
    </p>
  </div>
</footer>




<script> getSwitch(); </script>


  </body>
</html>